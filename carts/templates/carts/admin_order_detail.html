{% extends 'base.html' %}
{% load static %}

{% block title %}Détails Commande #{{ order.order_identifier }} | Admin{% endblock %}

{% block content %}
<style>
    :root {
        --primary: #4361ee;
        --dark: #2d3748;
        --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        --radius: 10px;
    }

    .title-1 {
        font-size: 1.5rem;
        color: var(--dark);
    }

    .title-line {
        width: 100px;
        height: 4px;
        background: var(--primary);
        margin-bottom: 20px;
    }

    .detail-card {
        background: white;
        border-radius: var(--radius);
        box-shadow: var(--shadow);
    }
</style>

<div class="container py-4">
    <div class="title-1">Détails de la Commande #{{ order.order_identifier|default:order.id }}</div>
    <div class="title-line"></div>

    <div class="detail-card p-4">
        <h5>Informations Générales</h5>
        <p><strong>Client :</strong> {{ order.fullname }}</p>
        <p><strong>Téléphone :</strong> {{ order.phone }}</p>
        {% if order.email %}<p><strong>Email :</strong> {{ order.email }}</p>{% endif %}
        <p><strong>Adresse :</strong> {{ order.address }}, {{ order.district }}, {{ order.city }}</p>
        <p><strong>Total :</strong> {{ order.total_price|floatformat:2 }} FCFA</p>
        <p><strong>Date :</strong> {{ order.created_at|date:"d/m/Y H:i" }}</p>
        <p><strong>Statut :</strong> {{ order.status|title }}</p>
        {% if order.notes %}<p><strong>Notes :</strong> {{ order.notes }}</p>{% endif %}

        {% if order_items %}
        <h5 class="mt-4">Articles Commandés</h5>
        <table class="table">
            <thead>
                <tr>
                    <th>Produit</th>
                    <th>Taille</th>
                    <th>Quantité</th>
                    <th>Prix Unitaire</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                {% for item in order_items %}
                <tr>
                    <td>{{ item.product.title }}</td>
                    <td>{{ item.size|default:"N/A" }}</td>
                    <td>{{ item.quantity }}</td>
                    <td>{{ item.price|floatformat:2 }} FCFA</td>
                    <td>{{ item.get_total|floatformat:2 }} FCFA</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% endif %}
    </div>

    <div class="mt-4">
        <a href="{% url 'admin_orders' %}" class="btn btn-secondary">Retour aux commandes</a>
    </div>
</div>
{% endblock %}